<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Interactive Timetable</title>

<style>
:root {
  --bg: rgba(255,255,255,0.85);
  --border: rgba(0,0,0,0.08);
  --text: #222;
  --muted: #666;
  --primary: #1f77ff;
}

@media (prefers-color-scheme: dark) {
  :root {
    --bg: rgba(30,30,30,0.85);
    --border: rgba(255,255,255,0.08);
    --text: #f0f0f0;
    --muted: #aaa;
  }
}

body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: transparent;
  color: var(--text);
  padding: 12px;
}

.container {
  background: var(--bg);
  backdrop-filter: blur(8px);
  border-radius: 14px;
  padding: 16px;
  border: 1px solid var(--border);
}

/* TOOLBAR */
.toolbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 14px;
}

.tabs, .actions {
  display: flex;
  gap: 8px;
}

button {
  border-radius: 999px;
  padding: 8px 16px;
  border: 1px solid var(--border);
  background: transparent;
  cursor: pointer;
  font-size: 13px;
  transition: all .2s ease;
}

button:hover {
  transform: translateY(-1px);
  background: rgba(0,0,0,0.05);
}

button.active {
  background: var(--primary);
  color: white;
  border-color: var(--primary);
}

.save { background: #2ecc71; color: white; }
.reset { background: #f39c12; color: white; }

/* GRID */
.timetable {
  display: grid;
  grid-template-columns: 70px repeat(5, 1fr);
  gap: 6px;
}

.header, .time {
  text-align: center;
  font-weight: 600;
  font-size: 12px;
}

.cell {
  min-height: 50px;
  border: 1px dashed var(--border);
  border-radius: 6px;
  padding: 4px;
}

.card {
  font-size: 11px;
  padding: 6px;
  border-radius: 6px;
  margin-bottom: 4px;
}

.activity { background: #dbeafe; color: #1e40af; }
.compulsory { background: #fee2e2; color: #991b1b; }
.break { background: #f3f4f6; color: #374151; }
</style>
</head>

<body>
<div class="container">

<div class="toolbar">
  <div class="tabs">
    <button class="active" onclick="showGrid()">ðŸ“Š Grid</button>
    <button onclick="showList()">ðŸ“‹ List</button>
  </div>
  <div class="actions">
    <button class="save" onclick="save()">ðŸ’¾ Save</button>
    <button class="reset" onclick="reset()">ðŸ”„ Reset</button>
  </div>
</div>

<div id="grid"></div>
<div id="list" style="display:none"></div>

</div>

<script>
const DAYS = ["Monday","Tuesday","Wednesday","Thursday","Friday"];
const TIMES = [];
for (let h=6; h<=22; h++) {
  TIMES.push(`${String(h).padStart(2,'0')}:00`);
  TIMES.push(`${String(h).padStart(2,'0')}:30`);
}

// DATA_PLACEHOLDER
let timetableData = {};
let original = JSON.parse(JSON.stringify(timetableData));

function minutes(t){ let [h,m]=t.split(":").map(Number); return h*60+m }

function showGrid(){
  grid.style.display="grid";
  list.style.display="none";
}
function showList(){
  grid.style.display="none";
  list.style.display="block";
  renderList();
}

function renderGrid(){
  grid.innerHTML="";
  grid.className="timetable";

  grid.append("");
  DAYS.forEach(d=>grid.append(header(d)));

  TIMES.forEach(t=>{
    grid.append(time(t));
    DAYS.forEach(d=>{
      const cell=document.createElement("div");
      cell.className="cell";
      timetableData[d].forEach(e=>{
        if(minutes(e.start)==minutes(t)){
          const c=document.createElement("div");
          c.className=`card ${e.type.toLowerCase()}`;
          c.textContent=`${e.name} (${e.start}-${e.end})`;
          cell.append(c);
        }
      });
      grid.append(cell);
    });
  });
}

function renderList(){
  list.innerHTML="";
  DAYS.forEach(d=>{
    const h=document.createElement("h4");
    h.textContent=d;
    list.append(h);
    timetableData[d].forEach(e=>{
      const p=document.createElement("div");
      p.textContent=`â€¢ ${e.name} (${e.start}-${e.end})`;
      list.append(p);
    });
  });
}

function header(t){ let d=document.createElement("div"); d.className="header"; d.textContent=t; return d }
function time(t){ let d=document.createElement("div"); d.className="time"; d.textContent=t; return d }

function save(){ alert("Saved locally (sync handled by Streamlit)"); }
function reset(){ timetableData=JSON.parse(JSON.stringify(original)); renderGrid(); }

renderGrid();
</script>
</body>
</html>
